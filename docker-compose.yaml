# You need to run:
# $ mkdir -p data mnt
# $ chown -R 65534:65534 data mnt
# at the first start to create directories with correct permissions

services:
  zipfs:
    # build: .
    image: ghcr.io/wvffle/fuse-zipfs@sha256:e5da004020fb2e02a1419fe2d1cd5da83371841e67c93d683d16f9e904e79594
    privileged: true
    volumes:
      - # Data/source directory
        source: ./data
        target: /app/data
        type: bind
      - # Mountpoint/target directory
        source: ./mnt
        target: /app/mnt
        type: bind
        bind:
          propagation: rshared
    environment:
      RUST_LOG: zipfs=debug
    command:
      - /app/data
      - /app/mnt
      - -o
      - allow_other
